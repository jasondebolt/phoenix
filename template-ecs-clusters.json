{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Creates ECS clusters for various environments.",
    "Parameters": {
      "ProjectName": {
        "Description": "The name of your project.",
        "MinLength": "1",
        "MaxLength": "20",
        "AllowedPattern": "^[a-z]+[\\-a-z0-9]*[a-z0-9]+",
        "ConstraintDescription": "User all lowercase, dashes, or numbers (demo-project) between 1 and 20 characters in length. Must not start with a number, and must not start or end with a dash.",
        "Type": "String"
      }
    },
    "Resources": {
      "Dev": {
        "Type": "AWS::ECS::Cluster",
        "Properties" : {
          "ClusterName" : {"Fn::Join": ["", [
            {"Ref": "ProjectName"},
            "Dev"
          ]]}
        }
      },
      "Testing": {
        "Type": "AWS::ECS::Cluster",
        "Properties" : {
          "ClusterName" : {"Fn::Join": ["", [
            {"Ref": "ProjectName"},
            "Testing"
          ]]}
        }
      },
      "Prod": {
        "Type": "AWS::ECS::Cluster",
        "Properties" : {
          "ClusterName" : {"Fn::Join": ["", [
            {"Ref": "ProjectName"},
            "Prod"
          ]]}
        }
      }
    },
    "Outputs": {
        "DevClusterName": {
            "Value": {"Ref": "Dev"},
            "Description": "Name of the dev cluster."
        },
        "TestingClusterName": {
            "Value": {"Ref": "Testing"},
            "Description": "Name of the testing cluster."
        },
        "ProdClusterName": {
            "Value": {"Ref": "Prod"},
            "Description": "Name of the prod cluster."
        }
    }
}
